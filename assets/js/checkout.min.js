!function(a){"use strict";a(function(){function b(b){var c=a("#iugu-credit-card-fields"),d=a("#iugu-billet-fields"),e=a('#iugu-select-payment input[value="'+b+'"]').closest("li");"credit-card"===b?(c.slideDown(200),d.slideUp(200)):(c.slideUp(200),d.slideDown(200)),a("#iugu-select-payment li").removeClass("active"),e.addClass("active")}function c(){var c=a('#iugu-select-payment input[name="iugu_payment_method"]').val();b(c)}function d(b){if(e)return e=!1,!0;if(!a("#payment_method_iugu").is(":checked"))return!0;if("radio"===a('body li.payment_method_iugu input[name="iugu_payment_method"]').attr("type")){if("credit-card"!==a('body li.payment_method_iugu input[name="iugu_payment_method"]:checked').val())return!0}else if("credit-card"!==a('body li.payment_method_iugu input[name="iugu_payment_method"]').val())return!0;var c=a(b),d=c.find("#iugu-card-expiry").val().replace(" ",""),f=a("#iugu-credit-card-fields",c),g="";return c.find("#iugu-card-expiry").val(d),Iugu.createPaymentToken(b,function(b){b.errors?(a(".woocommerce-error",f).remove(),g+="<ul>",a.each(b.errors,function(a,b){var c=b;"is_invalid"===c&&(c=iugu_wc_checkout_params.i18n_is_invalid),g+="<li>"+iugu_wc_checkout_params["i18n_"+a+"_field"]+" "+c+".</li>"}),g+="</ul>",f.prepend('<div class="woocommerce-error">'+g+"</div>")):(a(".iugu-token",c).remove(),c.append(a('<input class="iugu-token" name="iugu_token" type="hidden" />').val(b.id)),e=!0,c.submit())}),!1}var e=!1;c(),a("body").on("click",'li.payment_method_iugu input[name="iugu_payment_method"]',function(){b(a(this).val())}),a("body").on("updated_checkout",function(){c()}),Iugu.setAccountID(iugu_wc_checkout_params.account_id),Iugu.setTestMode(!0),a("form.checkout").on("checkout_place_order_iugu",function(){return d(this)}),a("form#order_review").submit(function(){return d(this)}),a("body").on("checkout_error",function(){a(".iugu-token").remove()}),a("form.checkout, form#order_review").on("change","#iugu-credit-card-fields input",function(){a(".iugu-token").remove()})})}(jQuery);